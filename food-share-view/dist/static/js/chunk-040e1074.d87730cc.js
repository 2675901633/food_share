(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-040e1074"],{"35ed":function(e,t,a){"use strict";a.d(t,"g",(function(){return s})),a.d(t,"f",(function(){return l})),a.d(t,"d",(function(){return i})),a.d(t,"j",(function(){return n})),a.d(t,"a",(function(){return d})),a.d(t,"b",(function(){return o})),a.d(t,"l",(function(){return c})),a.d(t,"c",(function(){return u})),a.d(t,"i",(function(){return h})),a.d(t,"k",(function(){return m})),a.d(t,"e",(function(){return p})),a.d(t,"h",(function(){return f}));var r=a("b775");function s(e){return Object(r["a"])({url:"/flashSale/list",method:"post",data:e})}function l(e){return Object(r["a"])({url:"/flashSale/detail/"+e,method:"get"})}function i(e){return Object(r["a"])({url:"/flashSale/doFlashSale/"+e,method:"post"})}function n(){return Object(r["a"])({url:"/flashSale/myOrders",method:"get"})}function d(e){return Object(r["a"])({url:"/flashSale/cancelOrder/"+e,method:"post"})}function o(e){return Object(r["a"])({url:"/flashSale/admin/create",method:"post",data:e})}function c(e){return Object(r["a"])({url:"/flashSale/admin/update",method:"post",data:e})}function u(e){return Object(r["a"])({url:"/flashSale/admin/delete/"+e,method:"post"})}function h(){return Object(r["a"])({url:"/flashSale/admin/preload",method:"post"})}function m(){return Object(r["a"])({url:"/flashSale/admin/refresh",method:"post"})}function p(e){return Object(r["a"])({url:"/flashSale/orders",method:"post",data:e})}function f(e){return Object(r["a"])({url:"/flashSale/payOrder/"+e,method:"post"})}},"721b":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"order-manage"},[a("h2",{staticClass:"page-title"},[e._v("秒杀订单管理")]),a("div",{staticClass:"operation-bar"},[a("el-button",{on:{click:function(t){return e.$router.push("/flashSaleManage")}}},[e._v("返回商品管理")]),a("el-button",{attrs:{type:"primary"},on:{click:e.loadData}},[e._v("刷新数据")])],1),a("div",{staticClass:"search-bar"},[a("el-input",{staticClass:"filter-item",staticStyle:{width:"200px"},attrs:{placeholder:"订单号",clearable:""},model:{value:e.searchOrderId,callback:function(t){e.searchOrderId=t},expression:"searchOrderId"}}),a("el-input",{staticClass:"filter-item",staticStyle:{width:"100px"},attrs:{placeholder:"用户ID",clearable:""},model:{value:e.searchUserId,callback:function(t){e.searchUserId=t},expression:"searchUserId"}}),a("el-input",{staticClass:"filter-item",staticStyle:{width:"100px"},attrs:{placeholder:"商品ID",clearable:""},model:{value:e.searchItemId,callback:function(t){e.searchItemId=t},expression:"searchItemId"}}),a("el-select",{staticClass:"filter-item",attrs:{placeholder:"订单状态",clearable:""},model:{value:e.searchStatus,callback:function(t){e.searchStatus=t},expression:"searchStatus"}},[a("el-option",{attrs:{label:"待支付",value:1}}),a("el-option",{attrs:{label:"已支付",value:2}}),a("el-option",{attrs:{label:"已取消",value:3}})],1),a("el-date-picker",{staticClass:"filter-item date-picker",attrs:{type:"datetimerange","range-separator":"至","start-placeholder":"下单开始日期","end-placeholder":"下单结束日期",format:"yyyy-MM-dd HH:mm","value-format":"yyyy-MM-dd HH:mm:ss"},model:{value:e.dateRange,callback:function(t){e.dateRange=t},expression:"dateRange"}}),a("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.handleSearch}},[e._v("搜索")]),a("el-button",{attrs:{icon:"el-icon-refresh"},on:{click:e.resetSearch}},[e._v("重置")])],1),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.tableLoading,expression:"tableLoading"}],staticStyle:{width:"100%"},attrs:{data:e.orderList,border:""}},[a("el-table-column",{attrs:{type:"index",width:"50",align:"center"}}),a("el-table-column",{attrs:{prop:"orderId",label:"订单号",width:"240","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{prop:"userId",label:"用户ID",width:"80",align:"center"}}),a("el-table-column",{attrs:{prop:"itemId",label:"商品ID",width:"80",align:"center"}}),a("el-table-column",{attrs:{prop:"price",label:"价格",width:"100",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{staticClass:"price"},[e._v("¥"+e._s(t.row.price))])]}}])}),a("el-table-column",{attrs:{prop:"orderTime",label:"下单时间",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(e.formatDate(t.row.orderTime))+" ")]}}])}),a("el-table-column",{attrs:{prop:"status",label:"状态",width:"100",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tag",{attrs:{type:e.getStatusType(t.row.status)}},[e._v(" "+e._s(e.getOrderStatusText(t.row.status))+" ")])]}}])}),a("el-table-column",{attrs:{label:"创建/更新时间",width:"280"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",[e._v("创建: "+e._s(e.formatDate(t.row.createTime)))]),a("div",[e._v("更新: "+e._s(e.formatDate(t.row.updateTime)))])]}}])}),a("el-table-column",{attrs:{label:"操作",width:"180",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini",type:"success"},on:{click:function(a){return e.handleViewItem(t.row.itemId)}}},[e._v("查看商品")]),3===t.row.status?a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){return e.handleDelete(t.row)}}},[e._v("删除")]):e._e()]}}])})],1),a("div",{staticClass:"pagination-container"},[a("el-pagination",{attrs:{"current-page":e.queryParams.current,"page-sizes":[10,20,50,100],"page-size":e.queryParams.size,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"current-change":e.handleCurrentChange,"size-change":e.handleSizeChange}})],1),a("el-dialog",{attrs:{title:"订单详情",visible:e.dialogVisible,width:"30%"},on:{"update:visible":function(t){e.dialogVisible=t}}},[e.selectedOrder?a("div",{staticClass:"order-detail"},[a("div",{staticClass:"detail-item"},[a("span",{staticClass:"label"},[e._v("订单号:")]),a("span",{staticClass:"value"},[e._v(e._s(e.selectedOrder.orderId))])]),a("div",{staticClass:"detail-item"},[a("span",{staticClass:"label"},[e._v("用户ID:")]),a("span",{staticClass:"value"},[e._v(e._s(e.selectedOrder.userId))])]),a("div",{staticClass:"detail-item"},[a("span",{staticClass:"label"},[e._v("商品ID:")]),a("span",{staticClass:"value"},[e._v(e._s(e.selectedOrder.itemId))])]),a("div",{staticClass:"detail-item"},[a("span",{staticClass:"label"},[e._v("价格:")]),a("span",{staticClass:"value price"},[e._v("¥"+e._s(e.selectedOrder.price))])]),a("div",{staticClass:"detail-item"},[a("span",{staticClass:"label"},[e._v("下单时间:")]),a("span",{staticClass:"value"},[e._v(e._s(e.formatDate(e.selectedOrder.orderTime)))])]),a("div",{staticClass:"detail-item"},[a("span",{staticClass:"label"},[e._v("状态:")]),a("span",{staticClass:"value"},[a("el-tag",{attrs:{type:e.getStatusType(e.selectedOrder.status)}},[e._v(" "+e._s(e.getOrderStatusText(e.selectedOrder.status))+" ")])],1)]),a("div",{staticClass:"detail-item"},[a("span",{staticClass:"label"},[e._v("创建时间:")]),a("span",{staticClass:"value"},[e._v(e._s(e.formatDate(e.selectedOrder.createTime)))])]),a("div",{staticClass:"detail-item"},[a("span",{staticClass:"label"},[e._v("更新时间:")]),a("span",{staticClass:"value"},[e._v(e._s(e.formatDate(e.selectedOrder.updateTime)))])])]):e._e(),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("关闭")])],1)])],1)},s=[],l=a("35ed"),i={name:"FlashSaleOrderManage",data(){return{queryParams:{current:1,size:10,orderId:"",userId:null,itemId:null,status:null,orderTimeBegin:null,orderTimeEnd:null},searchOrderId:"",searchUserId:"",searchItemId:"",searchStatus:null,dateRange:[],tableLoading:!1,orderList:[],total:0,dialogVisible:!1,selectedOrder:null}},created(){this.loadData()},methods:{loadData(){this.tableLoading=!0;const e={current:this.queryParams.current,size:this.queryParams.size,orderId:this.queryParams.orderId||null,userId:this.queryParams.userId||null,itemId:this.queryParams.itemId||null,status:this.queryParams.status||null,orderTimeBegin:this.queryParams.orderTimeBegin||null,orderTimeEnd:this.queryParams.orderTimeEnd||null};Object(l["e"])(e).then(e=>{e.data&&200===e.data.code?(this.orderList=e.data.data||[],this.total=e.data.total||this.orderList.length):(this.$message.error(e.data.msg||"获取订单数据失败"),this.orderList=[],this.total=0)}).catch(e=>{console.error(e),this.$message.error("获取订单数据失败"),this.orderList=[],this.total=0}).finally(()=>{this.tableLoading=!1})},handleSearch(){this.queryParams.current=1,this.queryParams.orderId=this.searchOrderId,this.queryParams.userId=this.searchUserId?parseInt(this.searchUserId):null,this.queryParams.itemId=this.searchItemId?parseInt(this.searchItemId):null,this.queryParams.status=this.searchStatus,this.dateRange&&2===this.dateRange.length?(this.queryParams.orderTimeBegin=this.dateRange[0],this.queryParams.orderTimeEnd=this.dateRange[1]):(this.queryParams.orderTimeBegin=null,this.queryParams.orderTimeEnd=null),this.loadData()},resetSearch(){this.searchOrderId="",this.searchUserId="",this.searchItemId="",this.searchStatus=null,this.dateRange=[],this.queryParams={current:1,size:10,orderId:"",userId:null,itemId:null,status:null,orderTimeBegin:null,orderTimeEnd:null},this.loadData()},handleCurrentChange(e){this.queryParams.current=e,this.loadData()},handleSizeChange(e){this.queryParams.size=e,this.loadData()},handleViewOrder(e){this.selectedOrder=e,this.dialogVisible=!0},handleViewItem(e){this.$router.push({path:"/flashSaleDetail",query:{id:e}})},handleDelete(e){this.$confirm(`确认删除订单 ${e.orderId} 吗？`,"警告",{type:"warning"}).then(()=>{this.$message({type:"info",message:"该功能尚未实现，请联系系统管理员"})}).catch(()=>{})},getOrderStatusText(e){return 1===e?"待支付":2===e?"已支付":3===e?"已取消":"未知状态"},getStatusType(e){return 1===e?"warning":2===e?"success":3===e?"info":""},formatDate(e){if(!e)return"";const t=new Date(e);return`${t.getFullYear()}-${String(t.getMonth()+1).padStart(2,"0")}-${String(t.getDate()).padStart(2,"0")} ${String(t.getHours()).padStart(2,"0")}:${String(t.getMinutes()).padStart(2,"0")}`}}},n=i,d=(a("d509"),a("2877")),o=Object(d["a"])(n,r,s,!1,null,"c01cb8b2",null);t["default"]=o.exports},"7ffd":function(e,t,a){},d509:function(e,t,a){"use strict";a("7ffd")}}]);
//# sourceMappingURL=chunk-040e1074.d87730cc.js.map