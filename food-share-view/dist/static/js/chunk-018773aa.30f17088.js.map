{"version":3,"sources":["webpack:///./src/views/user/Self.vue?d4ab","webpack:///./src/views/user/Self.vue?b397","webpack:///src/views/user/Self.vue","webpack:///./src/views/user/Self.vue?d5f0","webpack:///./src/views/user/Self.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","_v","attrs","handleAvatarSuccess","staticStyle","userAvatar","directives","name","rawName","value","userInfo","expression","domProps","on","$event","target","composing","$set","isLogin","isWord","postInfo","staticRenderFns","data","created","auth","methods","userName","userEmail","userUpdateDTO","$axios","put","$notify","position","duration","title","message","code","type","res","file","get","$router","push","component"],"mappings":"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","file":"static/js/chunk-018773aa.30f17088.js","sourcesContent":["export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Self.vue?vue&type=style&index=0&id=32dfb0c9&prod&scoped=true&lang=scss\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"container\"},[_c('div',[_c('p',[_vm._v(\"*头像\")]),_c('el-upload',{staticClass:\"avatar-uploader\",attrs:{\"action\":\"http://localhost:21090/api/food-share-sys/v1.0/file/upload\",\"show-file-list\":false,\"on-success\":_vm.handleAvatarSuccess}},[(_vm.userAvatar)?_c('img',{staticStyle:{\"width\":\"88px\",\"height\":\"88px\"},attrs:{\"src\":_vm.userAvatar}}):_c('i',{staticClass:\"el-icon-plus avatar-uploader-icon\"})])],1),_c('div',[_c('p',[_vm._v(\"*昵称\")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.userInfo.userName),expression:\"userInfo.userName\"}],staticClass:\"dialog-input\",attrs:{\"placeholder\":\"请输入\"},domProps:{\"value\":(_vm.userInfo.userName)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.userInfo, \"userName\", $event.target.value)}}})]),_c('div',[_c('p',[_vm._v(\"*邮箱\")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.userInfo.userEmail),expression:\"userInfo.userEmail\"}],staticClass:\"dialog-input\",attrs:{\"placeholder\":\"请输入\"},domProps:{\"value\":(_vm.userInfo.userEmail)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.userInfo, \"userEmail\", $event.target.value)}}})]),_c('div',[_c('div',[_c('p',{staticStyle:{\"font-size\":\"16px\"}},[_vm._v(\" *账号状态 \"),_c('el-tooltip',{staticClass:\"item\",attrs:{\"effect\":\"dark\",\"content\":\"一经封号，不可登录，不可使用系统功能\",\"placement\":\"right\"}},[_c('i',{staticClass:\"el-icon-info\"})])],1),_c('div',[(!_vm.userInfo.isLogin)?_c('span',{staticStyle:{\"font-size\":\"14px\",\"color\":\"rgb(27, 156, 53)\"}},[_c('i',{staticClass:\"el-icon-circle-check\",staticStyle:{\"margin-right\":\"6px\"}}),_vm._v(\"正常\")]):_c('span',{staticStyle:{\"font-size\":\"14px\",\"color\":\"rgb(230, 63, 49)\",\"text-decoration\":\"underline\",\"text-decoration-style\":\"dashed\"}},[_c('i',{staticClass:\"el-icon-warning-outline\",staticStyle:{\"margin-right\":\"6px\"}}),_vm._v(\"已被封禁\")])])]),_c('div',[_c('p',{staticStyle:{\"font-size\":\"16px\"}},[_vm._v(\" *留言状态 \"),_c('el-tooltip',{staticClass:\"item\",attrs:{\"effect\":\"dark\",\"content\":\"禁言后，互动功能受限\",\"placement\":\"right\"}},[_c('i',{staticClass:\"el-icon-info\"})])],1),_c('div',[(!_vm.userInfo.isWord)?_c('span',{staticStyle:{\"font-size\":\"14px\",\"color\":\"rgb(27, 156, 53)\"}},[_c('i',{staticClass:\"el-icon-circle-check\",staticStyle:{\"margin-right\":\"6px\"}}),_vm._v(\"正常\")]):_c('span',{staticStyle:{\"font-size\":\"14px\",\"color\":\"rgb(230, 63, 49)\",\"text-decoration\":\"underline\",\"text-decoration-style\":\"dashed\"}},[_c('i',{staticClass:\"el-icon-warning-outline\",staticStyle:{\"margin-right\":\"6px\"}}),_vm._v(\"已被封禁\")])])]),_c('div',{staticStyle:{\"margin-top\":\"20px\",\"text-align\":\"center\"}},[_c('el-button',{staticClass:\"customer\",attrs:{\"type\":\"primary\",\"size\":\"mini\",\"round\":\"\"},on:{\"click\":_vm.postInfo}},[_vm._v(\"立即修改\")])],1)])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n    <div class=\"container\">\r\n        <!-- 头像 -->\r\n        <div>\r\n            <p>*头像</p>\r\n            <el-upload class=\"avatar-uploader\" action=\"http://localhost:21090/api/food-share-sys/v1.0/file/upload\" :show-file-list=\"false\"\r\n                :on-success=\"handleAvatarSuccess\">\r\n                <img v-if=\"userAvatar\" :src=\"userAvatar\" style=\"width: 88px;height: 88px;\">\r\n                <i v-else class=\"el-icon-plus avatar-uploader-icon\"></i>\r\n            </el-upload>\r\n        </div>\r\n        <!-- 昵称 -->\r\n        <div>\r\n            <p>*昵称</p>\r\n            <input class=\"dialog-input\" v-model=\"userInfo.userName\" placeholder=\"请输入\" />\r\n        </div>\r\n        <!-- 邮箱 -->\r\n        <div>\r\n            <p>*邮箱</p>\r\n            <input class=\"dialog-input\" v-model=\"userInfo.userEmail\" placeholder=\"请输入\" />\r\n        </div>\r\n        <!-- 账号状态 -->\r\n        <div>\r\n            <div>\r\n                <p style=\"font-size: 16px;\">\r\n                    *账号状态\r\n                    <el-tooltip class=\"item\" effect=\"dark\" content=\"一经封号，不可登录，不可使用系统功能\" placement=\"right\">\r\n                        <i class=\"el-icon-info\"></i>\r\n                    </el-tooltip>\r\n                </p>\r\n                <div>\r\n                    <span v-if=\"!userInfo.isLogin\" style=\"font-size: 14px;color: rgb(27, 156, 53);\"><i\r\n                            style=\"margin-right: 6px;\" class=\"el-icon-circle-check\"></i>正常</span>\r\n                    <span v-else\r\n                        style=\"font-size: 14px;color: rgb(230, 63, 49);text-decoration: underline;text-decoration-style: dashed;\">\r\n                        <i style=\"margin-right: 6px;\" class=\"el-icon-warning-outline\"></i>已被封禁</span>\r\n                </div>\r\n            </div>\r\n            <div>\r\n                <p style=\"font-size: 16px;\">\r\n                    *留言状态\r\n                    <el-tooltip class=\"item\" effect=\"dark\" content=\"禁言后，互动功能受限\" placement=\"right\">\r\n                        <i class=\"el-icon-info\"></i>\r\n                    </el-tooltip>\r\n                </p>\r\n                <div>\r\n                    <span v-if=\"!userInfo.isWord\" style=\"font-size: 14px;color: rgb(27, 156, 53);\">\r\n                        <i style=\"margin-right: 6px;\" class=\"el-icon-circle-check\"></i>正常</span>\r\n                    <span v-else\r\n                        style=\"font-size: 14px;color: rgb(230, 63, 49);text-decoration: underline;text-decoration-style: dashed;\">\r\n                        <i style=\"margin-right: 6px;\" class=\"el-icon-warning-outline\"></i>已被封禁</span>\r\n                </div>\r\n            </div>\r\n            <div style=\"margin-top: 20px;text-align: center;\">\r\n                <el-button type=\"primary\" class=\"customer\" size=\"mini\" @click=\"postInfo\" round>立即修改</el-button>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</template>\r\n<script>\r\nexport default {\r\n    name: \"Self\",\r\n    data() {\r\n        return {\r\n            userInfo: {},\r\n            userAvatar: '',\r\n        }\r\n    },\r\n    created() {\r\n        this.auth();\r\n    },\r\n    methods: {\r\n        // 提交个人信息修改\r\n        async postInfo() {\r\n            const { userName, userEmail } = this.userInfo;\r\n            const userUpdateDTO = {\r\n                userAvatar: this.userAvatar,\r\n                userName,\r\n                userEmail\r\n            }\r\n            const { data } = await this.$axios.put('/user/update', userUpdateDTO);\r\n            this.$notify({\r\n                position: 'buttom-right',\r\n                duration: 1000,\r\n                title: '编辑个人信息',\r\n                message: data.code === 200 ? '编辑成功' : '编辑失败',\r\n                type: data.code === 200 ? 'success' : 'error'\r\n            });\r\n            // 返回首页\r\n            if (data.code === 200) {\r\n                this.auth();\r\n            }\r\n        },\r\n        // 头像上传\r\n        handleAvatarSuccess(res, file) {\r\n            this.$notify({\r\n                duration: 1500,\r\n                title: '头像上传',\r\n                message: res.code === 200 ? '上传成功' : '上传失败',\r\n                type: res.code === 200 ? 'success' : 'error'\r\n            });\r\n            // 上传成功则更新用户头像\r\n            if (res.code === 200) {\r\n                this.userAvatar = res.data;\r\n            }\r\n        },\r\n        // Token 检验 ,取得用户信息\r\n        async auth() {\r\n            const { data } = await this.$axios.get('/user/auth');\r\n            if (data.code !== 200) { // Token校验异常\r\n                this.$router.push('/');\r\n            } else {\r\n                this.userInfo = data.data;\r\n                this.userAvatar = data.data.userAvatar;\r\n            }\r\n        },\r\n    }\r\n};\r\n</script>\r\n<style scoped lang=\"scss\">\r\n.container {\r\n    width: 500px;\r\n    margin: 0 auto;\r\n}\r\n</style>\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Self.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Self.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./Self.vue?vue&type=template&id=32dfb0c9&scoped=true\"\nimport script from \"./Self.vue?vue&type=script&lang=js\"\nexport * from \"./Self.vue?vue&type=script&lang=js\"\nimport style0 from \"./Self.vue?vue&type=style&index=0&id=32dfb0c9&prod&scoped=true&lang=scss\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"32dfb0c9\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}