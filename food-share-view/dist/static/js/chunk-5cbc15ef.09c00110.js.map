{"version":3,"sources":["webpack:///./src/views/user/EditGourmet.vue?dd1d","webpack:///src/views/user/EditGourmet.vue","webpack:///./src/views/user/EditGourmet.vue?1042","webpack:///./src/views/user/EditGourmet.vue","webpack:///./src/views/user/EditGourmet.vue?6f10"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","on","goBack","_v","staticStyle","directives","name","rawName","value","gourmet","expression","domProps","$event","target","composing","$set","content","onReceive","model","callback","$$v","_l","item","key","id","handleCoverSuccess","cover","updateGourmet","staticRenderFns","components","Editor","data","categories","created","fetchFreshCategories","loadGourmetId","methods","gourmetId","sessionStorage","getItem","fetchGourmetById","Number","$axios","get","then","res","code","catch","error","console","log","put","$notify","duration","title","message","type","file","post","allCategory","unshift","$router","go","component"],"mappings":"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","file":"static/js/chunk-5cbc15ef.09c00110.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"container\"},[_c('div',{staticClass:\"top\"},[_c('el-tooltip',{staticClass:\"item\",attrs:{\"effect\":\"dark\",\"content\":\"返回首页\",\"placement\":\"bottom\"}},[_c('span',{staticClass:\"last-page\",on:{\"click\":_vm.goBack}},[_c('i',{staticClass:\"el-icon-back\"})])]),_c('span',{staticClass:\"text\"},[_vm._v(\"修改美食帖子\")])],1),_c('div',{staticClass:\"buttom\"},[_c('div',{staticStyle:{\"width\":\"900px\",\"margin\":\"0 auto\",\"background-color\":\"rgb(255,255,255)\"}},[_c('div',{staticStyle:{\"padding-block\":\"20px\",\"border-bottom\":\"1px solid rgb(234, 232, 232)\"}},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.gourmet.title),expression:\"gourmet.title\"}],staticClass:\"input-title\",staticStyle:{\"width\":\"80%\",\"font-size\":\"30px\"},attrs:{\"type\":\"text\",\"placeholder\":\"请输入标题\"},domProps:{\"value\":(_vm.gourmet.title)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.gourmet, \"title\", $event.target.value)}}})]),_c('div',{staticStyle:{\"border-bottom\":\"1px solid rgb(234, 232, 232)\"}},[_c('Editor',{attrs:{\"height\":\"calc(100vh - 400px)\",\"receiveContent\":_vm.gourmet.content},on:{\"on-receive\":_vm.onReceive}})],1),_c('div',{staticStyle:{\"padding-inline\":\"20px\"}},[_c('p',[_vm._v(\"*从属菜系\")]),_c('el-select',{staticStyle:{\"width\":\"250px\"},attrs:{\"size\":\"small\",\"placeholder\":\"菜系\"},model:{value:(_vm.gourmet.categoryId),callback:function ($$v) {_vm.$set(_vm.gourmet, \"categoryId\", $$v)},expression:\"gourmet.categoryId\"}},_vm._l((_vm.categories),function(item){return _c('el-option',{key:item.id,attrs:{\"label\":item.name,\"value\":item.id}})}),1)],1),_c('div',{staticStyle:{\"padding-inline\":\"20px\"}},[_c('p',[_vm._v(\"封面\")]),_c('el-upload',{staticClass:\"avatar-uploader\",attrs:{\"action\":\"http://localhost:21090/api/food-share-sys/v1.0/file/upload\",\"show-file-list\":false,\"on-success\":_vm.handleCoverSuccess}},[(_vm.cover)?_c('img',{staticStyle:{\"width\":\"180px\",\"height\":\"130px\"},attrs:{\"src\":_vm.cover}}):_c('i',{staticClass:\"el-icon-plus avatar-uploader-icon\"})])],1),_c('div',{staticStyle:{\"padding-inline\":\"20px\"}},[_c('p',[_vm._v(\"是否公开\")]),_c('el-switch',{attrs:{\"active-color\":\"#13ce66\",\"inactive-color\":\"#3c3f41\"},model:{value:(_vm.gourmet.isPublish),callback:function ($$v) {_vm.$set(_vm.gourmet, \"isPublish\", $$v)},expression:\"gourmet.isPublish\"}})],1),_c('div',{staticStyle:{\"text-align\":\"center\"}},[_c('el-button',{staticStyle:{\"margin\":\"20px 0\"},attrs:{\"plain\":\"\"},on:{\"click\":_vm.updateGourmet}},[_vm._v(\"确定修改\")])],1)])])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n    <div class=\"container\">\r\n        <div class=\"top\">\r\n            <el-tooltip class=\"item\" effect=\"dark\" content=\"返回首页\" placement=\"bottom\">\r\n                <span class=\"last-page\" @click=\"goBack\">\r\n                    <i class=\"el-icon-back\"></i>\r\n                </span>\r\n            </el-tooltip>\r\n            <span class=\"text\">修改美食帖子</span>\r\n        </div>\r\n        <div class=\"buttom\">\r\n            <div style=\"width: 900px;margin: 0 auto;background-color: rgb(255,255,255);\">\r\n                <div style=\"padding-block: 20px;border-bottom: 1px solid rgb(234, 232, 232);\">\r\n                    <input v-model=\"gourmet.title\" style=\"width: 80%;font-size: 30px;\" type=\"text\" class=\"input-title\"\r\n                        placeholder=\"请输入标题\">\r\n                </div>\r\n                <div style=\"border-bottom: 1px solid rgb(234, 232, 232);\">\r\n                    <Editor height=\"calc(100vh - 400px)\" :receiveContent=\"gourmet.content\" @on-receive=\"onReceive\" />\r\n                </div>\r\n                <div style=\"padding-inline: 20px;\">\r\n                    <p>*从属菜系</p>\r\n                    <el-select style=\"width: 250px;\" size=\"small\" v-model=\"gourmet.categoryId\" placeholder=\"菜系\">\r\n                        <el-option v-for=\"item in categories\" :key=\"item.id\" :label=\"item.name\" :value=\"item.id\">\r\n                        </el-option>\r\n                    </el-select>\r\n                </div>\r\n                <div style=\"padding-inline: 20px;\">\r\n                    <p>封面</p>\r\n                    <el-upload class=\"avatar-uploader\"\r\n                        action=\"http://localhost:21090/api/food-share-sys/v1.0/file/upload\" :show-file-list=\"false\"\r\n                        :on-success=\"handleCoverSuccess\">\r\n                        <img v-if=\"cover\" :src=\"cover\" style=\"width: 180px;height: 130px;\">\r\n                        <i v-else class=\"el-icon-plus avatar-uploader-icon\"></i>\r\n                    </el-upload>\r\n                </div>\r\n                <div style=\"padding-inline: 20px;\">\r\n                    <p>是否公开</p>\r\n                    <el-switch v-model=\"gourmet.isPublish\" active-color=\"#13ce66\" inactive-color=\"#3c3f41\">\r\n                    </el-switch>\r\n                </div>\r\n                <div style=\"text-align: center;\">\r\n                    <el-button @click=\"updateGourmet\" style=\"margin: 20px 0;\" plain>确定修改</el-button>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</template>\r\n<script>\r\nimport Editor from \"@/components/Editor\"\r\nexport default {\r\n    components: { Editor },\r\n    name: \"CreateGourmet\",\r\n    data() {\r\n        return {\r\n            gourmet: {},\r\n            categories: [], // 美食做法的数据集\r\n            cover: null,\r\n        }\r\n    },\r\n    created() {\r\n        this.fetchFreshCategories();\r\n        this.loadGourmetId();\r\n    },\r\n    methods: {\r\n        loadGourmetId() {\r\n            const gourmetId = sessionStorage.getItem('gourmetId');\r\n            this.fetchGourmetById(Number(gourmetId));\r\n        },\r\n        // 通过ID查找对应的美食做法\r\n        fetchGourmetById(gourmetId) {\r\n            this.$axios.get(`/gourmet/${gourmetId}`).then(res => {\r\n                const { data } = res;\r\n                if (data.code === 200) {\r\n                    this.gourmet = data.data[0];\r\n                    this.cover = this.gourmet.cover;\r\n\r\n                }\r\n            }).catch(error => {\r\n                console.log(\"通过ID查询美食做法异常：\", error);\r\n            })\r\n        },\r\n        // 修改美食\r\n        updateGourmet() {\r\n            this.gourmet.cover = this.cover;\r\n            this.$axios.put('/gourmet/update', this.gourmet).then(res => {\r\n                if (res.data.code === 200) {\r\n                    this.$notify({\r\n                        duration: 1000,\r\n                        title: '美食做法修改',\r\n                        message: '修改成功',\r\n                        type: 'success'\r\n                    });\r\n                    this.goBack();\r\n                }\r\n            }).catch(error => {\r\n                console.log(\"修改美食做法异常：\", error);\r\n            });\r\n        },\r\n        // 封面上传回调函数\r\n        handleCoverSuccess(res, file) {\r\n            this.$notify({\r\n                duration: 1500,\r\n                title: '封面上传',\r\n                message: res.code === 200 ? '上传成功' : '上传失败',\r\n                type: res.code === 200 ? 'success' : 'error'\r\n            });\r\n            // 上传成功则更新用户头像\r\n            if (res.code === 200) {\r\n                this.cover = res.data;\r\n            }\r\n        },\r\n        // 查询美食做法的信息\r\n        fetchFreshCategories() {\r\n            this.$axios.post('/category/query', {}).then(res => {\r\n                if (res.data.code === 200) {\r\n                    this.categories = res.data.data;\r\n                    const allCategory = { id: null, name: '全部' };\r\n                    // 头插\r\n                    this.categories.unshift(allCategory);\r\n                }\r\n            }).catch(error => {\r\n                console.log(\"查询美食做法异常：\", error);\r\n            });\r\n        },\r\n        // 返回上一页\r\n        goBack() {\r\n            this.$router.go(-1);\r\n        },\r\n        onReceive(content) {\r\n            this.gourmet.content = content;\r\n        },\r\n    }\r\n};\r\n</script>\r\n<style scoped lang=\"scss\">\r\n.container {\r\n    background-color: rgb(248, 248, 248);\r\n    min-height: 100vh;\r\n\r\n    .buttom {\r\n        margin-top: 6px;\r\n    }\r\n\r\n    .top {\r\n        line-height: 64px;\r\n        padding-inline: 40px;\r\n        background-color: rgb(255, 255, 255);\r\n\r\n        .text {\r\n            font-size: 18px;\r\n            font-weight: 900;\r\n            margin-left: 10px;\r\n        }\r\n\r\n        .last-page:hover {\r\n            background-color: rgb(232, 232, 232);\r\n        }\r\n\r\n        .last-page {\r\n            background-color: rgb(245, 245, 245);\r\n            padding: 2px 4px;\r\n            border-radius: 12px;\r\n            border: 1px solid rgb(235, 235, 235);\r\n            cursor: pointer;\r\n        }\r\n    }\r\n}\r\n</style>\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./EditGourmet.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./EditGourmet.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./EditGourmet.vue?vue&type=template&id=353f8784&scoped=true\"\nimport script from \"./EditGourmet.vue?vue&type=script&lang=js\"\nexport * from \"./EditGourmet.vue?vue&type=script&lang=js\"\nimport style0 from \"./EditGourmet.vue?vue&type=style&index=0&id=353f8784&prod&scoped=true&lang=scss\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"353f8784\",\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./EditGourmet.vue?vue&type=style&index=0&id=353f8784&prod&scoped=true&lang=scss\""],"sourceRoot":""}