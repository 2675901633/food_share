(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0dd106"],{8091:function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-row",{staticStyle:{"background-color":"#FFFFFF",padding:"5px 0","border-radius":"5px"}},[a("el-row",{staticStyle:{padding:"10px","margin-left":"5px"}},[a("el-row",{staticStyle:{display:"flex","justify-content":"left",gap:"6px"}},[a("el-date-picker",{staticStyle:{width:"216px"},attrs:{size:"small",type:"daterange","range-separator":"至","start-placeholder":"操作开始","end-placeholder":"操作结束"},on:{change:t.fetchFreshData},model:{value:t.searchTime,callback:function(e){t.searchTime=e},expression:"searchTime"}}),a("el-input",{staticStyle:{width:"166px"},attrs:{size:"small",placeholder:"内容ID",clearable:""},on:{clear:t.handleFilterClear},model:{value:t.interactionQueryDto.contentId,callback:function(e){t.$set(t.interactionQueryDto,"contentId",e)},expression:"interactionQueryDto.contentId"}},[a("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:t.handleFilter},slot:"append"})],1)],1)],1),a("el-row",{staticStyle:{margin:"0 22px","border-top":"1px solid rgb(245,245,245)"}},[a("el-table",{staticStyle:{width:"100%"},attrs:{stripe:!0,data:t.tableData}},[a("el-table-column",{attrs:{prop:"userAvatar",width:"68",label:"头像"},scopedSlots:t._u([{key:"default",fn:function(t){return[a("el-avatar",{staticStyle:{"margin-top":"10px"},attrs:{size:25,src:t.row.userAvatar}})]}}])}),a("el-table-column",{attrs:{prop:"userName",label:"用户",width:"208"}}),a("el-table-column",{attrs:{prop:"contentId",sortable:!0,width:"120",label:"内容ID"}}),a("el-table-column",{attrs:{prop:"contentTitle",label:"内容"}}),a("el-table-column",{attrs:{prop:"type",label:"用户操作",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[1===e.row.type?a("span",[t._v("点赞")]):t._e(),2===e.row.type?a("span",[t._v("收藏")]):t._e(),3===e.row.type?a("span",[t._v("浏览")]):t._e(),4===e.row.type?a("span",[t._v("用户评分("+t._s(e.row.score)+")")]):t._e()]}}])}),a("el-table-column",{attrs:{prop:"createTime",label:"创建时间",sortable:!0,width:"168"}}),a("el-table-column",{attrs:{label:"操作",width:"110"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{staticClass:"text-button",on:{click:function(a){return t.handleDelete(e.row)}}},[t._v("删除")])]}}])})],1),a("el-pagination",{staticStyle:{margin:"10px 0",float:"right"},attrs:{"current-page":t.currentPage,"page-sizes":[20,50],"page-size":t.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:t.totalItems},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)],1)},l=[],s={data(){return{data:{},filterText:"",currentPage:1,pageSize:20,totalItems:0,tableData:[],delectedRows:[],searchTime:[],interactionQueryDto:{}}},created(){this.fetchFreshData()},methods:{async batchDelete(){if(!this.delectedRows.length)return void this.$message("未选中任何数据");const t=await this.$swalConfirm({title:"删除互动信息数据",text:"删除后不可恢复，是否继续？",icon:"warning"});if(t)try{let t=this.delectedRows.map(t=>t.id);const e=await this.$axios.post("/interaction/batchDelete",t);if(200===e.data.code)return this.$notify({duration:1e3,title:"信息删除",message:"删除成功",type:"success"}),void this.fetchFreshData()}catch(e){this.$message.error("互动信息信息删除异常：",e),console.error("互动信息信息删除异常：",e)}},async fetchFreshData(){try{this.tableData=[];let t=null,e=null;if(null!=this.searchTime&&2===this.searchTime.length){const[a,r]=await Promise.all(this.searchTime.map(t=>t.toISOString()));t=a.split("T")[0]+"T00:00:00",e=r.split("T")[0]+"T23:59:59"}const a={current:this.currentPage,size:this.pageSize,key:this.filterText,startTime:t,endTime:e,...this.interactionQueryDto},r=await this.$axios.post("/interaction/query",a),{data:l}=r;this.tableData=l.data,this.totalItems=l.total}catch(t){this.$message.error("查询互动信息信息异常:",t),console.error("查询互动信息信息异常:",t)}},handleFilter(){this.currentPage=1,this.fetchFreshData()},handleFilterClear(){this.filterText="",this.handleFilter()},handleSizeChange(t){this.pageSize=t,this.currentPage=1,this.fetchFreshData()},handleCurrentChange(t){this.currentPage=t,this.fetchFreshData()},handleDelete(t){this.delectedRows.push(t),this.batchDelete()}}},i=s,n=a("2877"),o=Object(n["a"])(i,r,l,!1,null,"071e7872",null);e["default"]=o.exports}}]);
//# sourceMappingURL=chunk-2d0dd106.588d1514.js.map