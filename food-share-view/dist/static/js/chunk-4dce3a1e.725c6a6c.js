(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4dce3a1e"],{"1fc8":function(t,e,o){},"42ba":function(t,e,o){"use strict";o.d(e,"a",(function(){return i}));var n=o("b775"),a=o("bc3a"),r=o.n(a);const s=r.a.create({baseURL:"http://localhost:5000",timeout:5e3,withCredentials:!0});s.interceptors.request.use(t=>{const e=localStorage.getItem("token");return null!==e&&(t.headers["token"]=e),t},t=>Promise.reject(t)),s.interceptors.response.use(t=>t,t=>(console.warn("Python推荐系统请求错误:",t.message),Promise.reject(t)));const i={getRecommendationList(){return console.log("发送推荐请求到Python系统"),s.get("/recommend/list").then(t=>(console.log("Python推荐系统响应:",t),t)).catch(t=>(console.warn("Python推荐系统请求失败，回退到Java后端:",t),Object(n["a"])({url:"/recommend/10",method:"get",timeout:1e4})))},evaluateMetricsApi(){return console.log("发送评估请求到Python系统"),s.get("/recommend/evaluate").then(t=>(console.log("Python推荐系统评估响应:",t),t)).catch(t=>(console.warn("Python推荐系统评估请求失败，回退到Java后端:",t),Object(n["a"])({url:"/recommend/metrics/evaluate",method:"get",timeout:8e3})))},getTrendingFoods(t=10){return Object(n["a"])({url:"/recommend/trending",method:"get",params:{limit:t}})},getGourmetUV(t){return Object(n["a"])({url:"/recommend/uv/"+t,method:"get"})}}},"8a49":function(t,e,o){"use strict";o.r(e);var n=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"trending-foods-container"},[o("h2",{staticClass:"page-title"},[t._v("热门美食排行榜")]),o("div",{staticClass:"filter-section"},[o("el-radio-group",{on:{change:t.fetchTrendingFoods},model:{value:t.limit,callback:function(e){t.limit=e},expression:"limit"}},[o("el-radio-button",{attrs:{label:5}},[t._v("Top 5")]),o("el-radio-button",{attrs:{label:10}},[t._v("Top 10")]),o("el-radio-button",{attrs:{label:20}},[t._v("Top 20")])],1),o("el-button",{attrs:{type:"primary",size:"small",icon:"el-icon-refresh"},on:{click:t.refreshTrendingFoods}},[t._v("刷新")])],1),o("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:t.trendingFoods,stripe:"","header-cell-style":{background:"#f5f7fa",color:"#606266"}}},[o("el-table-column",{attrs:{prop:"rank",label:"排名",width:"80",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[o("div",{staticClass:"rank-badge",class:{"top-three":e.row.rank<=3}},[t._v(" "+t._s(e.row.rank)+" ")])]}}])}),o("el-table-column",{attrs:{label:"美食","min-width":"300"},scopedSlots:t._u([{key:"default",fn:function(e){return[o("div",{staticClass:"food-info"},[o("el-image",{staticStyle:{width:"80px",height:"60px","border-radius":"4px"},attrs:{src:e.row.cover,fit:"cover"},on:{click:function(o){return t.viewDetail(e.row.id)}}},[o("div",{staticClass:"image-slot",attrs:{slot:"error"},slot:"error"},[o("i",{staticClass:"el-icon-picture-outline"})])]),o("div",{staticClass:"food-details"},[o("div",{staticClass:"food-title",on:{click:function(o){return t.viewDetail(e.row.id)}}},[t._v(t._s(e.row.title))]),o("div",{staticClass:"food-meta"},[o("span",[o("i",{staticClass:"el-icon-user"}),t._v(" "+t._s(e.row.userName))]),o("span",[o("i",{staticClass:"el-icon-date"}),t._v(" "+t._s(t.formatDate(e.row.createTime)))])])])],1)]}}])}),o("el-table-column",{attrs:{prop:"viewCount",label:"浏览量",width:"120",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[o("span",{staticClass:"view-count"},[t._v(t._s(e.row.viewCount))])]}}])}),o("el-table-column",{attrs:{label:"UV统计",width:"120",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[o("el-popover",{attrs:{placement:"top",width:"200",trigger:"hover"}},[o("div",[o("p",[t._v("UV统计表示独立访问用户数")]),o("p",[t._v("今日UV: "+t._s(e.row.uvCount||"加载中..."))])]),o("div",{staticClass:"uv-count",attrs:{slot:"reference"},slot:"reference"},[o("el-button",{attrs:{type:"text"},on:{click:function(o){return t.fetchGourmetUV(e.row)}}},[t._v(" 查看UV ")])],1)])]}}])}),o("el-table-column",{attrs:{label:"操作",width:"120",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[o("el-button",{attrs:{type:"text"},on:{click:function(o){return t.viewDetail(e.row.id)}}},[t._v("查看详情")])]}}])})],1),0!==t.trendingFoods.length||t.loading?t._e():o("div",{staticClass:"empty-data"},[o("i",{staticClass:"el-icon-warning-outline"}),o("p",[t._v("暂无热门美食数据")])])],1)},a=[],r=o("42ba"),s={name:"TrendingFoods",data(){return{trendingFoods:[],loading:!1,limit:10}},created(){this.fetchTrendingFoods()},methods:{async fetchTrendingFoods(){this.loading=!0;try{const t=await r["a"].getTrendingFoods(this.limit);200===t.data.code?this.trendingFoods=t.data.data.map((t,e)=>({...t,rank:e+1,uvCount:null})):this.$message.error("获取热门排行榜失败")}catch(t){console.error("获取热门排行榜异常:",t),this.$message.error("获取热门排行榜异常")}finally{this.loading=!1}},async fetchGourmetUV(t){if(null===t.uvCount)try{const e=await r["a"].getGourmetUV(t.id);200===e.data.code&&this.$set(t,"uvCount",e.data.data)}catch(e){console.error("获取UV统计异常:",e),this.$set(t,"uvCount","获取失败")}},refreshTrendingFoods(){this.fetchTrendingFoods(),this.$message.success("热门排行榜已刷新")},viewDetail(t){this.$router.push("/gourmetDetail?id="+t)},formatDate(t){if(!t)return"";const e=new Date(t);return`${e.getFullYear()}-${String(e.getMonth()+1).padStart(2,"0")}-${String(e.getDate()).padStart(2,"0")}`}}},i=s,l=(o("ab65"),o("2877")),c=Object(l["a"])(i,n,a,!1,null,"e7a74c74",null);e["default"]=c.exports},ab65:function(t,e,o){"use strict";o("1fc8")}}]);
//# sourceMappingURL=chunk-4dce3a1e.725c6a6c.js.map