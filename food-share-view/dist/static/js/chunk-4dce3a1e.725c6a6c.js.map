{"version":3,"sources":["webpack:///./src/api/recommend.js","webpack:///./src/views/user/TrendingFoods.vue?3f9e","webpack:///src/views/user/TrendingFoods.vue","webpack:///./src/views/user/TrendingFoods.vue?7080","webpack:///./src/views/user/TrendingFoods.vue","webpack:///./src/views/user/TrendingFoods.vue?0426"],"names":["pythonRequest","axios","create","baseURL","timeout","withCredentials","interceptors","request","use","config","token","localStorage","getItem","headers","error","Promise","reject","response","console","warn","message","recommendApi","getRecommendationList","log","get","then","pythonRes","catch","url","method","evaluateMetricsApi","getTrendingFoods","limit","params","getGourmetUV","gourmetId","render","_vm","this","_h","$createElement","_c","_self","staticClass","_v","on","fetchTrendingFoods","model","value","callback","$$v","expression","attrs","refreshTrendingFoods","directives","name","rawName","staticStyle","trendingFoods","background","color","scopedSlots","_u","key","fn","scope","class","row","rank","_s","cover","$event","viewDetail","id","slot","title","userName","formatDate","createTime","viewCount","uvCount","fetchGourmetUV","length","loading","_e","staticRenderFns","data","created","methods","code","map","item","index","$message","$set","success","$router","push","dateStr","date","Date","getFullYear","String","getMonth","padStart","getDate","component"],"mappings":"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","file":"static/js/chunk-4dce3a1e.725c6a6c.js","sourcesContent":["import request from '@/utils/request'\nimport axios from 'axios'\n\n// 创建一个单独的axios实例用于Python推荐系统\nconst pythonRequest = axios.create({\n  baseURL: 'http://localhost:5000',\n  timeout: 5000, // 缩短超时时间以更快回退到备选方案\n  withCredentials: true // 允许跨域请求携带凭证\n});\n\n// 添加请求拦截器，为Python请求添加token\npythonRequest.interceptors.request.use(config => {\n  const token = localStorage.getItem('token');\n  if (token !== null) {\n    config.headers[\"token\"] = token;\n  }\n  return config;\n}, error => {\n  return Promise.reject(error);\n});\n\n// 添加响应拦截器，处理跨域问题\npythonRequest.interceptors.response.use(response => {\n  return response;\n}, error => {\n  console.warn(\"Python推荐系统请求错误:\", error.message);\n  return Promise.reject(error);\n});\n\n// 基于内容的推荐API封装\nexport const recommendApi = {\n  // 获取相似美食推荐\n  getRecommendationList() {\n    console.log('发送推荐请求到Python系统');\n    // 首先尝试从Python推荐系统获取个性化推荐\n    return pythonRequest.get('/recommend/list')\n      .then(pythonRes => {\n        console.log(\"Python推荐系统响应:\", pythonRes);\n        return pythonRes;\n      })\n      .catch(error => {\n        console.warn(\"Python推荐系统请求失败，回退到Java后端:\", error);\n        // 如果Python系统失败，回退到Java后端\n        return request({\n          url: `/recommend/10`,\n          method: 'get',\n          timeout: 10000\n        });\n      });\n  },\n\n  // 获取效果\n  evaluateMetricsApi() {\n    console.log('发送评估请求到Python系统');\n    // 首先尝试从Python推荐系统获取评估指标\n    return pythonRequest.get('/recommend/evaluate')\n      .then(pythonRes => {\n        console.log(\"Python推荐系统评估响应:\", pythonRes);\n        return pythonRes;\n      })\n      .catch(error => {\n        console.warn(\"Python推荐系统评估请求失败，回退到Java后端:\", error);\n        // 如果Python系统失败，回退到Java后端\n        return request({\n          url: `/recommend/metrics/evaluate`,\n          method: 'get',\n          timeout: 8000\n        });\n      });\n  },\n\n  // 获取热门美食排行榜\n  getTrendingFoods(limit = 10) {\n    return request({\n      url: `/recommend/trending`,\n      method: 'get',\n      params: { limit }\n    })\n  },\n\n  // 获取美食UV统计\n  getGourmetUV(gourmetId) {\n    return request({\n      url: `/recommend/uv/${gourmetId}`,\n      method: 'get'\n    })\n  }\n}\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"trending-foods-container\"},[_c('h2',{staticClass:\"page-title\"},[_vm._v(\"热门美食排行榜\")]),_c('div',{staticClass:\"filter-section\"},[_c('el-radio-group',{on:{\"change\":_vm.fetchTrendingFoods},model:{value:(_vm.limit),callback:function ($$v) {_vm.limit=$$v},expression:\"limit\"}},[_c('el-radio-button',{attrs:{\"label\":5}},[_vm._v(\"Top 5\")]),_c('el-radio-button',{attrs:{\"label\":10}},[_vm._v(\"Top 10\")]),_c('el-radio-button',{attrs:{\"label\":20}},[_vm._v(\"Top 20\")])],1),_c('el-button',{attrs:{\"type\":\"primary\",\"size\":\"small\",\"icon\":\"el-icon-refresh\"},on:{\"click\":_vm.refreshTrendingFoods}},[_vm._v(\"刷新\")])],1),_c('el-table',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.loading),expression:\"loading\"}],staticStyle:{\"width\":\"100%\"},attrs:{\"data\":_vm.trendingFoods,\"stripe\":\"\",\"header-cell-style\":{background:'#f5f7fa',color:'#606266'}}},[_c('el-table-column',{attrs:{\"prop\":\"rank\",\"label\":\"排名\",\"width\":\"80\",\"align\":\"center\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('div',{staticClass:\"rank-badge\",class:{'top-three': scope.row.rank <= 3}},[_vm._v(\" \"+_vm._s(scope.row.rank)+\" \")])]}}])}),_c('el-table-column',{attrs:{\"label\":\"美食\",\"min-width\":\"300\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('div',{staticClass:\"food-info\"},[_c('el-image',{staticStyle:{\"width\":\"80px\",\"height\":\"60px\",\"border-radius\":\"4px\"},attrs:{\"src\":scope.row.cover,\"fit\":\"cover\"},on:{\"click\":function($event){return _vm.viewDetail(scope.row.id)}}},[_c('div',{staticClass:\"image-slot\",attrs:{\"slot\":\"error\"},slot:\"error\"},[_c('i',{staticClass:\"el-icon-picture-outline\"})])]),_c('div',{staticClass:\"food-details\"},[_c('div',{staticClass:\"food-title\",on:{\"click\":function($event){return _vm.viewDetail(scope.row.id)}}},[_vm._v(_vm._s(scope.row.title))]),_c('div',{staticClass:\"food-meta\"},[_c('span',[_c('i',{staticClass:\"el-icon-user\"}),_vm._v(\" \"+_vm._s(scope.row.userName))]),_c('span',[_c('i',{staticClass:\"el-icon-date\"}),_vm._v(\" \"+_vm._s(_vm.formatDate(scope.row.createTime)))])])])],1)]}}])}),_c('el-table-column',{attrs:{\"prop\":\"viewCount\",\"label\":\"浏览量\",\"width\":\"120\",\"align\":\"center\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('span',{staticClass:\"view-count\"},[_vm._v(_vm._s(scope.row.viewCount))])]}}])}),_c('el-table-column',{attrs:{\"label\":\"UV统计\",\"width\":\"120\",\"align\":\"center\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-popover',{attrs:{\"placement\":\"top\",\"width\":\"200\",\"trigger\":\"hover\"}},[_c('div',[_c('p',[_vm._v(\"UV统计表示独立访问用户数\")]),_c('p',[_vm._v(\"今日UV: \"+_vm._s(scope.row.uvCount || '加载中...'))])]),_c('div',{staticClass:\"uv-count\",attrs:{\"slot\":\"reference\"},slot:\"reference\"},[_c('el-button',{attrs:{\"type\":\"text\"},on:{\"click\":function($event){return _vm.fetchGourmetUV(scope.row)}}},[_vm._v(\" 查看UV \")])],1)])]}}])}),_c('el-table-column',{attrs:{\"label\":\"操作\",\"width\":\"120\",\"align\":\"center\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-button',{attrs:{\"type\":\"text\"},on:{\"click\":function($event){return _vm.viewDetail(scope.row.id)}}},[_vm._v(\"查看详情\")])]}}])})],1),(_vm.trendingFoods.length === 0 && !_vm.loading)?_c('div',{staticClass:\"empty-data\"},[_c('i',{staticClass:\"el-icon-warning-outline\"}),_c('p',[_vm._v(\"暂无热门美食数据\")])]):_vm._e()],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"trending-foods-container\">\r\n    <h2 class=\"page-title\">热门美食排行榜</h2>\r\n    <div class=\"filter-section\">\r\n      <el-radio-group v-model=\"limit\" @change=\"fetchTrendingFoods\">\r\n        <el-radio-button :label=\"5\">Top 5</el-radio-button>\r\n        <el-radio-button :label=\"10\">Top 10</el-radio-button>\r\n        <el-radio-button :label=\"20\">Top 20</el-radio-button>\r\n      </el-radio-group>\r\n      <el-button type=\"primary\" size=\"small\" @click=\"refreshTrendingFoods\" icon=\"el-icon-refresh\">刷新</el-button>\r\n    </div>\r\n\r\n    <el-table\r\n      v-loading=\"loading\"\r\n      :data=\"trendingFoods\"\r\n      stripe\r\n      style=\"width: 100%\"\r\n      :header-cell-style=\"{background:'#f5f7fa',color:'#606266'}\">\r\n      <el-table-column prop=\"rank\" label=\"排名\" width=\"80\" align=\"center\">\r\n        <template slot-scope=\"scope\">\r\n          <div class=\"rank-badge\" :class=\"{'top-three': scope.row.rank <= 3}\">\r\n            {{ scope.row.rank }}\r\n          </div>\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column label=\"美食\" min-width=\"300\">\r\n        <template slot-scope=\"scope\">\r\n          <div class=\"food-info\">\r\n            <el-image \r\n              :src=\"scope.row.cover\" \r\n              fit=\"cover\"\r\n              style=\"width: 80px; height: 60px; border-radius: 4px;\"\r\n              @click=\"viewDetail(scope.row.id)\">\r\n              <div slot=\"error\" class=\"image-slot\">\r\n                <i class=\"el-icon-picture-outline\"></i>\r\n              </div>\r\n            </el-image>\r\n            <div class=\"food-details\">\r\n              <div class=\"food-title\" @click=\"viewDetail(scope.row.id)\">{{ scope.row.title }}</div>\r\n              <div class=\"food-meta\">\r\n                <span><i class=\"el-icon-user\"></i> {{ scope.row.userName }}</span>\r\n                <span><i class=\"el-icon-date\"></i> {{ formatDate(scope.row.createTime) }}</span>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column prop=\"viewCount\" label=\"浏览量\" width=\"120\" align=\"center\">\r\n        <template slot-scope=\"scope\">\r\n          <span class=\"view-count\">{{ scope.row.viewCount }}</span>\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column label=\"UV统计\" width=\"120\" align=\"center\">\r\n        <template slot-scope=\"scope\">\r\n          <el-popover\r\n            placement=\"top\"\r\n            width=\"200\"\r\n            trigger=\"hover\">\r\n            <div>\r\n              <p>UV统计表示独立访问用户数</p>\r\n              <p>今日UV: {{ scope.row.uvCount || '加载中...' }}</p>\r\n            </div>\r\n            <div slot=\"reference\" class=\"uv-count\">\r\n              <el-button type=\"text\" @click=\"fetchGourmetUV(scope.row)\">\r\n                查看UV\r\n              </el-button>\r\n            </div>\r\n          </el-popover>\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column label=\"操作\" width=\"120\" align=\"center\">\r\n        <template slot-scope=\"scope\">\r\n          <el-button type=\"text\" @click=\"viewDetail(scope.row.id)\">查看详情</el-button>\r\n        </template>\r\n      </el-table-column>\r\n    </el-table>\r\n\r\n    <div v-if=\"trendingFoods.length === 0 && !loading\" class=\"empty-data\">\r\n      <i class=\"el-icon-warning-outline\"></i>\r\n      <p>暂无热门美食数据</p>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { recommendApi } from '@/api/recommend'\r\n\r\nexport default {\r\n  name: 'TrendingFoods',\r\n  data() {\r\n    return {\r\n      trendingFoods: [],\r\n      loading: false,\r\n      limit: 10\r\n    }\r\n  },\r\n  created() {\r\n    this.fetchTrendingFoods()\r\n  },\r\n  methods: {\r\n    async fetchTrendingFoods() {\r\n      this.loading = true\r\n      try {\r\n        const response = await recommendApi.getTrendingFoods(this.limit)\r\n        if (response.data.code === 200) {\r\n          // 添加排名属性\r\n          this.trendingFoods = response.data.data.map((item, index) => {\r\n            return {\r\n              ...item,\r\n              rank: index + 1,\r\n              uvCount: null // 初始化UV计数\r\n            }\r\n          })\r\n        } else {\r\n          this.$message.error('获取热门排行榜失败')\r\n        }\r\n      } catch (error) {\r\n        console.error('获取热门排行榜异常:', error)\r\n        this.$message.error('获取热门排行榜异常')\r\n      } finally {\r\n        this.loading = false\r\n      }\r\n    },\r\n    async fetchGourmetUV(row) {\r\n      if (row.uvCount !== null) return // 已加载过UV数据\r\n\r\n      try {\r\n        const response = await recommendApi.getGourmetUV(row.id)\r\n        if (response.data.code === 200) {\r\n          // 使用Vue.set确保响应式更新\r\n          this.$set(row, 'uvCount', response.data.data)\r\n        }\r\n      } catch (error) {\r\n        console.error('获取UV统计异常:', error)\r\n        this.$set(row, 'uvCount', '获取失败')\r\n      }\r\n    },\r\n    refreshTrendingFoods() {\r\n      this.fetchTrendingFoods()\r\n      this.$message.success('热门排行榜已刷新')\r\n    },\r\n    viewDetail(id) {\r\n      this.$router.push(`/gourmetDetail?id=${id}`)\r\n    },\r\n    formatDate(dateStr) {\r\n      if (!dateStr) return ''\r\n      const date = new Date(dateStr)\r\n      return `${date.getFullYear()}-${String(date.getMonth() + 1).padStart(2, '0')}-${String(date.getDate()).padStart(2, '0')}`\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped lang=\"scss\">\r\n.trending-foods-container {\r\n  padding: 20px;\r\n  background-color: #fff;\r\n  border-radius: 8px;\r\n  box-shadow: 0 2px 12px 0 rgba(0, 0, 0, 0.05);\r\n\r\n  .page-title {\r\n    margin-top: 0;\r\n    margin-bottom: 20px;\r\n    color: #303133;\r\n    font-size: 22px;\r\n    font-weight: 600;\r\n  }\r\n\r\n  .filter-section {\r\n    display: flex;\r\n    justify-content: space-between;\r\n    margin-bottom: 20px;\r\n  }\r\n\r\n  .rank-badge {\r\n    display: inline-block;\r\n    width: 30px;\r\n    height: 30px;\r\n    line-height: 30px;\r\n    text-align: center;\r\n    border-radius: 50%;\r\n    background-color: #f0f2f5;\r\n    color: #606266;\r\n    font-weight: bold;\r\n\r\n    &.top-three {\r\n      background-color: #ffd04b;\r\n      color: #fff;\r\n    }\r\n  }\r\n\r\n  .food-info {\r\n    display: flex;\r\n    align-items: center;\r\n  }\r\n\r\n  .food-details {\r\n    margin-left: 15px;\r\n  }\r\n\r\n  .food-title {\r\n    font-weight: 500;\r\n    color: #303133;\r\n    margin-bottom: 5px;\r\n    cursor: pointer;\r\n\r\n    &:hover {\r\n      color: #409EFF;\r\n    }\r\n  }\r\n\r\n  .food-meta {\r\n    font-size: 12px;\r\n    color: #909399;\r\n\r\n    span {\r\n      margin-right: 15px;\r\n    }\r\n\r\n    i {\r\n      margin-right: 5px;\r\n    }\r\n  }\r\n\r\n  .view-count {\r\n    font-weight: 500;\r\n    color: #f56c6c;\r\n  }\r\n\r\n  .uv-count {\r\n    color: #409EFF;\r\n  }\r\n\r\n  .empty-data {\r\n    text-align: center;\r\n    padding: 40px 0;\r\n    color: #909399;\r\n\r\n    i {\r\n      font-size: 48px;\r\n      margin-bottom: 10px;\r\n    }\r\n  }\r\n}\r\n</style> ","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TrendingFoods.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TrendingFoods.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./TrendingFoods.vue?vue&type=template&id=e7a74c74&scoped=true\"\nimport script from \"./TrendingFoods.vue?vue&type=script&lang=js\"\nexport * from \"./TrendingFoods.vue?vue&type=script&lang=js\"\nimport style0 from \"./TrendingFoods.vue?vue&type=style&index=0&id=e7a74c74&prod&scoped=true&lang=scss\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"e7a74c74\",\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TrendingFoods.vue?vue&type=style&index=0&id=e7a74c74&prod&scoped=true&lang=scss\""],"sourceRoot":""}