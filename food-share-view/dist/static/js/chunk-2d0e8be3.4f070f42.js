(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0e8be3"],{"8b25":function(e,t,a){"use strict";a.r(t);var l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-row",{staticStyle:{"background-color":"#FFFFFF",padding:"5px 0","border-radius":"5px"}},[a("el-row",{staticStyle:{padding:"10px","margin-left":"5px"}},[a("el-row",{staticStyle:{display:"flex","justify-content":"left",gap:"6px"}},[a("el-date-picker",{staticStyle:{width:"216px"},attrs:{size:"small",type:"daterange","range-separator":"至","start-placeholder":"分享开始","end-placeholder":"分享结束"},on:{change:e.fetchFreshData},model:{value:e.searchTime,callback:function(t){e.searchTime=t},expression:"searchTime"}}),a("el-input",{staticStyle:{width:"166px"},attrs:{size:"small",placeholder:"访问码",clearable:""},on:{clear:e.handleFilterClear},model:{value:e.contentNetQueryDto.accessCode,callback:function(t){e.$set(e.contentNetQueryDto,"accessCode",t)},expression:"contentNetQueryDto.accessCode"}},[a("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:e.handleFilter},slot:"append"})],1)],1)],1),a("el-row",{staticStyle:{margin:"0 22px","border-top":"1px solid rgb(245,245,245)"}},[a("el-table",{staticStyle:{width:"100%"},attrs:{stripe:!0,data:e.tableData}},[a("el-table-column",{attrs:{prop:"gourmetTitle",label:"分享内容"}}),a("el-table-column",{attrs:{prop:"gourmetId",sortable:!0,label:"内容ID",width:"98"}}),a("el-table-column",{attrs:{prop:"accessCode",label:"访问码",width:"128"}}),a("el-table-column",{attrs:{prop:"userId",sortable:!0,label:"用户ID",width:"98"}}),a("el-table-column",{attrs:{prop:"userName",label:"发布者",width:"118"}}),a("el-table-column",{attrs:{prop:"accessPassword",label:"访问密码",width:"118"}}),a("el-table-column",{attrs:{prop:"passwordAuth",label:"认证状态",width:"118"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.passwordAuth?"密码":"非认证"))])]}}])}),a("el-table-column",{attrs:{prop:"validDay",sortable:!0,label:"有效期",width:"98"}}),a("el-table-column",{attrs:{prop:"userName",label:"发布者",width:"118"}}),a("el-table-column",{attrs:{prop:"createTime",label:"创建时间",sortable:!0,width:"168"}}),a("el-table-column",{attrs:{label:"操作",width:"110"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{staticClass:"text-button",on:{click:function(a){return e.handleDelete(t.row)}}},[e._v("删除")])]}}])})],1),a("el-pagination",{staticStyle:{margin:"10px 0",float:"right"},attrs:{"current-page":e.currentPage,"page-sizes":[20,50],"page-size":e.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.totalItems},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1)},s=[],r={data(){return{data:{},filterText:"",currentPage:1,pageSize:20,totalItems:0,tableData:[],delectedRows:[],searchTime:[],contentNetQueryDto:{}}},created(){this.fetchFreshData()},methods:{async batchDelete(){if(!this.delectedRows.length)return void this.$message("未选中任何数据");const e=await this.$swalConfirm({title:"删除内容分享数据",text:"删除后不可恢复，是否继续？",icon:"warning"});if(e)try{let e=this.delectedRows.map(e=>e.id);const t=await this.$axios.post("/contentNet/batchDelete",e);if(200===t.data.code)return this.$notify({duration:1e3,title:"信息删除",message:"删除成功",type:"success"}),void this.fetchFreshData()}catch(t){this.$message.error("内容分享信息删除异常：",t),console.error("内容分享信息删除异常：",t)}},async fetchFreshData(){try{this.tableData=[];let e=null,t=null;if(null!=this.searchTime&&2===this.searchTime.length){const[a,l]=await Promise.all(this.searchTime.map(e=>e.toISOString()));e=a.split("T")[0]+"T00:00:00",t=l.split("T")[0]+"T23:59:59"}const a={current:this.currentPage,size:this.pageSize,key:this.filterText,startTime:e,endTime:t,...this.contentNetQueryDto},l=await this.$axios.post("/contentNet/query",a),{data:s}=l;this.tableData=s.data,this.totalItems=s.total}catch(e){this.$message.error("查询内容分享信息异常:",e),console.error("查询内容分享信息异常:",e)}},handleFilter(){this.currentPage=1,this.fetchFreshData()},handleFilterClear(){this.filterText="",this.handleFilter()},handleSizeChange(e){this.pageSize=e,this.currentPage=1,this.fetchFreshData()},handleCurrentChange(e){this.currentPage=e,this.fetchFreshData()},handleDelete(e){this.delectedRows.push(e),this.batchDelete()}}},i=r,n=a("2877"),o=Object(n["a"])(i,l,s,!1,null,"b397f7b4",null);t["default"]=o.exports}}]);
//# sourceMappingURL=chunk-2d0e8be3.4f070f42.js.map