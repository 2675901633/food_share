(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5cbc15ef"],{"0821":function(t,e,o){"use strict";o.r(e);var s=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"container"},[o("div",{staticClass:"top"},[o("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"返回首页",placement:"bottom"}},[o("span",{staticClass:"last-page",on:{click:t.goBack}},[o("i",{staticClass:"el-icon-back"})])]),o("span",{staticClass:"text"},[t._v("修改美食帖子")])],1),o("div",{staticClass:"buttom"},[o("div",{staticStyle:{width:"900px",margin:"0 auto","background-color":"rgb(255,255,255)"}},[o("div",{staticStyle:{"padding-block":"20px","border-bottom":"1px solid rgb(234, 232, 232)"}},[o("input",{directives:[{name:"model",rawName:"v-model",value:t.gourmet.title,expression:"gourmet.title"}],staticClass:"input-title",staticStyle:{width:"80%","font-size":"30px"},attrs:{type:"text",placeholder:"请输入标题"},domProps:{value:t.gourmet.title},on:{input:function(e){e.target.composing||t.$set(t.gourmet,"title",e.target.value)}}})]),o("div",{staticStyle:{"border-bottom":"1px solid rgb(234, 232, 232)"}},[o("Editor",{attrs:{height:"calc(100vh - 400px)",receiveContent:t.gourmet.content},on:{"on-receive":t.onReceive}})],1),o("div",{staticStyle:{"padding-inline":"20px"}},[o("p",[t._v("*从属菜系")]),o("el-select",{staticStyle:{width:"250px"},attrs:{size:"small",placeholder:"菜系"},model:{value:t.gourmet.categoryId,callback:function(e){t.$set(t.gourmet,"categoryId",e)},expression:"gourmet.categoryId"}},t._l(t.categories,(function(t){return o("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})),1)],1),o("div",{staticStyle:{"padding-inline":"20px"}},[o("p",[t._v("封面")]),o("el-upload",{staticClass:"avatar-uploader",attrs:{action:"http://localhost:21090/api/food-share-sys/v1.0/file/upload","show-file-list":!1,"on-success":t.handleCoverSuccess}},[t.cover?o("img",{staticStyle:{width:"180px",height:"130px"},attrs:{src:t.cover}}):o("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1),o("div",{staticStyle:{"padding-inline":"20px"}},[o("p",[t._v("是否公开")]),o("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#3c3f41"},model:{value:t.gourmet.isPublish,callback:function(e){t.$set(t.gourmet,"isPublish",e)},expression:"gourmet.isPublish"}})],1),o("div",{staticStyle:{"text-align":"center"}},[o("el-button",{staticStyle:{margin:"20px 0"},attrs:{plain:""},on:{click:t.updateGourmet}},[t._v("确定修改")])],1)])])])},i=[],a=o("ceb0"),c={components:{Editor:a["a"]},name:"CreateGourmet",data(){return{gourmet:{},categories:[],cover:null}},created(){this.fetchFreshCategories(),this.loadGourmetId()},methods:{loadGourmetId(){const t=sessionStorage.getItem("gourmetId");this.fetchGourmetById(Number(t))},fetchGourmetById(t){this.$axios.get("/gourmet/"+t).then(t=>{const{data:e}=t;200===e.code&&(this.gourmet=e.data[0],this.cover=this.gourmet.cover)}).catch(t=>{console.log("通过ID查询美食做法异常：",t)})},updateGourmet(){this.gourmet.cover=this.cover,this.$axios.put("/gourmet/update",this.gourmet).then(t=>{200===t.data.code&&(this.$notify({duration:1e3,title:"美食做法修改",message:"修改成功",type:"success"}),this.goBack())}).catch(t=>{console.log("修改美食做法异常：",t)})},handleCoverSuccess(t,e){this.$notify({duration:1500,title:"封面上传",message:200===t.code?"上传成功":"上传失败",type:200===t.code?"success":"error"}),200===t.code&&(this.cover=t.data)},fetchFreshCategories(){this.$axios.post("/category/query",{}).then(t=>{if(200===t.data.code){this.categories=t.data.data;const e={id:null,name:"全部"};this.categories.unshift(e)}}).catch(t=>{console.log("查询美食做法异常：",t)})},goBack(){this.$router.go(-1)},onReceive(t){this.gourmet.content=t}}},r=c,l=(o("22e7"),o("2877")),n=Object(l["a"])(r,s,i,!1,null,"353f8784",null);e["default"]=n.exports},"22e7":function(t,e,o){"use strict";o("2540")},2540:function(t,e,o){}}]);
//# sourceMappingURL=chunk-5cbc15ef.09c00110.js.map