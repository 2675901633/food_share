{"version":3,"sources":["webpack:///./src/components/DefaultFoodImage.vue?3f6a","webpack:///src/components/DefaultFoodImage.vue","webpack:///./src/components/DefaultFoodImage.vue?aac1","webpack:///./src/components/DefaultFoodImage.vue","webpack:///./src/api/flashSale.js","webpack:///./src/components/DefaultFoodImage.vue?2e5b","webpack:///./src/views/user/FlashSale.vue?0504","webpack:///src/views/user/FlashSale.vue","webpack:///./src/views/user/FlashSale.vue?5b5a","webpack:///./src/views/user/FlashSale.vue","webpack:///./src/views/user/FlashSale.vue?01fa"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","_v","staticRenderFns","name","component","listFlashSaleItems","data","request","url","method","getFlashSaleItemDetail","itemId","doFlashSale","queryMyOrders","cancelOrder","orderId","createFlashSaleItem","updateFlashSaleItem","deleteFlashSaleItem","preloadFlashSaleStock","refreshFlashSaleStatus","getAllOrders","payOrder","on","handleTabClick","model","value","callback","$$v","activeTab","expression","staticStyle","loadData","nativeOn","$event","type","indexOf","_k","keyCode","key","apply","arguments","searchName","resetSearch","$router","push","directives","rawName","flashSaleItems","length","_l","item","id","padding","goToDetail","image","class","getStatusClass","status","_s","getStatusText","flashPrice","originalPrice","getProgressPercentage","getProgressColor","soldCount","stock","remainSeconds","currentPage","pageSize","total","handleCurrentChange","components","DefaultFoodImage","countdown","props","time","Number","default","format","String","displayTime","remainingTime","mounted","startCountdown","beforeDestroy","timer","clearInterval","methods","updateDisplay","$emit","setTimeout","$parent","seconds","Math","floor","minutes","hours","days","formattedTime","replace","toString","padStart","setInterval","h","loading","created","queryParams","current","size","then","res","code","$message","error","msg","catch","err","console","finally","path","query","percentage"],"mappings":"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","file":"static/js/chunk-cff42bde.8840e098.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"default-food-image\"},[_c('svg',{staticClass:\"food-icon\",attrs:{\"xmlns\":\"http://www.w3.org/2000/svg\",\"viewBox\":\"0 0 24 24\",\"fill\":\"currentColor\"}},[_c('path',{attrs:{\"d\":\"M12,2A10,10 0 0,1 22,12A10,10 0 0,1 12,22A10,10 0 0,1 2,12A10,10 0 0,1 12,2M12,4A8,8 0 0,0 4,12A8,8 0 0,0 12,20A8,8 0 0,0 20,12A8,8 0 0,0 12,4M11,17H13V14H16V12H13V9H11V12H8V14H11V17Z\"}})]),_c('span',[_vm._v(\"暂无图片\")])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"default-food-image\">\r\n    <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" fill=\"currentColor\" class=\"food-icon\">\r\n      <path d=\"M12,2A10,10 0 0,1 22,12A10,10 0 0,1 12,22A10,10 0 0,1 2,12A10,10 0 0,1 12,2M12,4A8,8 0 0,0 4,12A8,8 0 0,0 12,20A8,8 0 0,0 20,12A8,8 0 0,0 12,4M11,17H13V14H16V12H13V9H11V12H8V14H11V17Z\" />\r\n    </svg>\r\n    <span>暂无图片</span>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: 'DefaultFoodImage'\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.default-food-image {\r\n  width: 100%;\r\n  height: 100%;\r\n  background-color: #f5f5f5;\r\n  display: flex;\r\n  flex-direction: column;\r\n  justify-content: center;\r\n  align-items: center;\r\n  color: #909399;\r\n}\r\n\r\n.food-icon {\r\n  width: 40px;\r\n  height: 40px;\r\n  margin-bottom: 10px;\r\n}\r\n</style> ","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DefaultFoodImage.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DefaultFoodImage.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./DefaultFoodImage.vue?vue&type=template&id=153742af&scoped=true\"\nimport script from \"./DefaultFoodImage.vue?vue&type=script&lang=js\"\nexport * from \"./DefaultFoodImage.vue?vue&type=script&lang=js\"\nimport style0 from \"./DefaultFoodImage.vue?vue&type=style&index=0&id=153742af&prod&scoped=true&lang=css\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"153742af\",\n  null\n  \n)\n\nexport default component.exports","import request from '@/utils/request';\r\n\r\n/**\r\n * 查询秒杀商品列表\r\n * @param {Object} data 查询参数\r\n * @returns {Promise<any>}\r\n */\r\nexport function listFlashSaleItems(data) {\r\n    return request({\r\n        url: '/flashSale/list',\r\n        method: 'post',\r\n        data\r\n    });\r\n}\r\n\r\n/**\r\n * 获取秒杀商品详情\r\n * @param {number} itemId 商品ID\r\n * @returns {Promise<any>}\r\n */\r\nexport function getFlashSaleItemDetail(itemId) {\r\n    return request({\r\n        url: `/flashSale/detail/${itemId}`,\r\n        method: 'get'\r\n    });\r\n}\r\n\r\n/**\r\n * 执行秒杀\r\n * @param {number} itemId 商品ID\r\n * @returns {Promise<any>}\r\n */\r\nexport function doFlashSale(itemId) {\r\n    return request({\r\n        url: `/flashSale/doFlashSale/${itemId}`,\r\n        method: 'post'\r\n    });\r\n}\r\n\r\n/**\r\n * 查询用户订单\r\n * @returns {Promise<any>}\r\n */\r\nexport function queryMyOrders() {\r\n    return request({\r\n        url: '/flashSale/myOrders',\r\n        method: 'get'\r\n    });\r\n}\r\n\r\n/**\r\n * 取消订单\r\n * @param {string} orderId 订单ID\r\n * @returns {Promise<any>}\r\n */\r\nexport function cancelOrder(orderId) {\r\n    return request({\r\n        url: `/flashSale/cancelOrder/${orderId}`,\r\n        method: 'post'\r\n    });\r\n}\r\n\r\n/**\r\n * 创建秒杀商品\r\n * @param {Object} data 商品数据\r\n * @returns {Promise<any>}\r\n */\r\nexport function createFlashSaleItem(data) {\r\n    return request({\r\n        url: '/flashSale/admin/create',\r\n        method: 'post',\r\n        data\r\n    });\r\n}\r\n\r\n/**\r\n * 更新秒杀商品\r\n * @param {Object} data 商品数据\r\n * @returns {Promise<any>}\r\n */\r\nexport function updateFlashSaleItem(data) {\r\n    return request({\r\n        url: '/flashSale/admin/update',\r\n        method: 'post',\r\n        data\r\n    });\r\n}\r\n\r\n/**\r\n * 删除秒杀商品\r\n * @param {number} itemId 商品ID\r\n * @returns {Promise<any>}\r\n */\r\nexport function deleteFlashSaleItem(itemId) {\r\n    return request({\r\n        url: `/flashSale/admin/delete/${itemId}`,\r\n        method: 'post'\r\n    });\r\n}\r\n\r\n/**\r\n * 预热秒杀商品库存\r\n * @returns {Promise<any>}\r\n */\r\nexport function preloadFlashSaleStock() {\r\n    return request({\r\n        url: '/flashSale/admin/preload',\r\n        method: 'post'\r\n    });\r\n}\r\n\r\n/**\r\n * 刷新秒杀商品状态\r\n * @returns {Promise<any>}\r\n */\r\nexport function refreshFlashSaleStatus() {\r\n    return request({\r\n        url: '/flashSale/admin/refresh',\r\n        method: 'post'\r\n    });\r\n}\r\n\r\n/**\r\n * 获取所有秒杀订单\r\n * @param {Object} data 查询参数\r\n * @returns {Promise<any>}\r\n */\r\nexport function getAllOrders(data) {\r\n    return request({\r\n        url: '/flashSale/orders',\r\n        method: 'post',\r\n        data\r\n    });\r\n}\r\n\r\n/**\r\n * 支付订单\r\n * @param {string} orderId 订单ID\r\n * @returns {Promise<any>}\r\n */\r\nexport function payOrder(orderId) {\r\n    return request({\r\n        url: `/flashSale/payOrder/${orderId}`,\r\n        method: 'post'\r\n    });\r\n} ","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DefaultFoodImage.vue?vue&type=style&index=0&id=153742af&prod&scoped=true&lang=css\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"flash-sale-container\"},[_c('div',{staticClass:\"flash-sale-header\"},[_c('h2',[_vm._v(\"限时秒杀\")]),_c('el-tabs',{on:{\"tab-click\":_vm.handleTabClick},model:{value:(_vm.activeTab),callback:function ($$v) {_vm.activeTab=$$v},expression:\"activeTab\"}},[_c('el-tab-pane',{attrs:{\"label\":\"进行中\",\"name\":\"ongoing\"}}),_c('el-tab-pane',{attrs:{\"label\":\"即将开始\",\"name\":\"upcoming\"}}),_c('el-tab-pane',{attrs:{\"label\":\"已结束\",\"name\":\"ended\"}})],1)],1),_c('div',{staticClass:\"flash-sale-filter\"},[_c('el-input',{staticStyle:{\"width\":\"220px\"},attrs:{\"placeholder\":\"搜索商品名称\",\"prefix-icon\":\"el-icon-search\",\"clearable\":\"\"},on:{\"clear\":_vm.loadData},nativeOn:{\"keyup\":function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\")){ return null; }return _vm.loadData.apply(null, arguments)}},model:{value:(_vm.searchName),callback:function ($$v) {_vm.searchName=$$v},expression:\"searchName\"}}),_c('el-button',{attrs:{\"type\":\"primary\",\"size\":\"small\"},on:{\"click\":_vm.loadData}},[_vm._v(\"搜索\")]),_c('el-button',{attrs:{\"size\":\"small\"},on:{\"click\":_vm.resetSearch}},[_vm._v(\"重置\")]),_c('el-button',{attrs:{\"type\":\"success\",\"size\":\"small\"},on:{\"click\":function($event){return _vm.$router.push('/myOrders')}}},[_vm._v(\"我的订单\")])],1),_c('div',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.loading),expression:\"loading\"}],staticClass:\"flash-sale-content\"},[(_vm.flashSaleItems.length === 0)?_c('div',{staticClass:\"empty-data\"},[_c('i',{staticClass:\"el-icon-goods\"}),_c('p',[_vm._v(\"暂无秒杀商品\")])]):_c('div',{staticClass:\"flash-sale-items\"},_vm._l((_vm.flashSaleItems),function(item){return _c('el-card',{key:item.id,staticClass:\"flash-sale-item\",attrs:{\"body-style\":{ padding: '0px' },\"shadow\":\"hover\"},nativeOn:{\"click\":function($event){return _vm.goToDetail(item.id)}}},[_c('div',{staticClass:\"item-image\"},[(item.image)?_c('img',{attrs:{\"src\":item.image,\"alt\":\"商品图片\"}}):_c('default-food-image'),_c('div',{staticClass:\"item-status\",class:_vm.getStatusClass(item.status)},[_vm._v(\" \"+_vm._s(_vm.getStatusText(item.status))+\" \")])],1),_c('div',{staticClass:\"item-info\"},[_c('h3',{staticClass:\"item-title\"},[_vm._v(_vm._s(item.name))]),_c('div',{staticClass:\"item-price\"},[_c('span',{staticClass:\"flash-price\"},[_vm._v(\"¥\"+_vm._s(item.flashPrice))]),_c('span',{staticClass:\"original-price\"},[_vm._v(\"¥\"+_vm._s(item.originalPrice))])]),_c('div',{staticClass:\"item-progress\"},[_c('el-progress',{attrs:{\"percentage\":_vm.getProgressPercentage(item),\"color\":_vm.getProgressColor(item)}}),_c('span',{staticClass:\"progress-text\"},[_vm._v(\"已售 \"+_vm._s(item.soldCount || 0)+\"/\"+_vm._s(item.stock + (item.soldCount || 0)))])],1),_c('div',{staticClass:\"item-time\"},[_c('i',{staticClass:\"el-icon-time\"}),(item.status === 1)?_c('countdown',{attrs:{\"time\":item.remainSeconds * 1000,\"format\":\"结束: mm分ss秒\"}}):(item.status === 0)?_c('countdown',{attrs:{\"time\":item.remainSeconds * 1000,\"format\":\"开始: mm分ss秒\"}}):_c('span',[_vm._v(\"已结束\")])],1)])])}),1),_c('div',{staticClass:\"pagination\"},[_c('el-pagination',{attrs:{\"current-page\":_vm.currentPage,\"page-size\":_vm.pageSize,\"layout\":\"total, prev, pager, next\",\"total\":_vm.total},on:{\"current-change\":_vm.handleCurrentChange,\"update:currentPage\":function($event){_vm.currentPage=$event},\"update:current-page\":function($event){_vm.currentPage=$event}}})],1)])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"flash-sale-container\">\r\n    <div class=\"flash-sale-header\">\r\n      <h2>限时秒杀</h2>\r\n      <el-tabs v-model=\"activeTab\" @tab-click=\"handleTabClick\">\r\n        <el-tab-pane label=\"进行中\" name=\"ongoing\"></el-tab-pane>\r\n        <el-tab-pane label=\"即将开始\" name=\"upcoming\"></el-tab-pane>\r\n        <el-tab-pane label=\"已结束\" name=\"ended\"></el-tab-pane>\r\n      </el-tabs>\r\n    </div>\r\n    \r\n    <div class=\"flash-sale-filter\">\r\n      <el-input\r\n        v-model=\"searchName\"\r\n        placeholder=\"搜索商品名称\"\r\n        prefix-icon=\"el-icon-search\"\r\n        clearable\r\n        @clear=\"loadData\"\r\n        @keyup.enter.native=\"loadData\"\r\n        style=\"width: 220px;\"\r\n      ></el-input>\r\n      <el-button type=\"primary\" size=\"small\" @click=\"loadData\">搜索</el-button>\r\n      <el-button size=\"small\" @click=\"resetSearch\">重置</el-button>\r\n      <el-button type=\"success\" size=\"small\" @click=\"$router.push('/myOrders')\">我的订单</el-button>\r\n    </div>\r\n    \r\n    <div v-loading=\"loading\" class=\"flash-sale-content\">\r\n      <div v-if=\"flashSaleItems.length === 0\" class=\"empty-data\">\r\n        <i class=\"el-icon-goods\"></i>\r\n        <p>暂无秒杀商品</p>\r\n      </div>\r\n      \r\n      <div v-else class=\"flash-sale-items\">\r\n        <el-card\r\n          v-for=\"item in flashSaleItems\"\r\n          :key=\"item.id\"\r\n          class=\"flash-sale-item\"\r\n          :body-style=\"{ padding: '0px' }\"\r\n          shadow=\"hover\"\r\n          @click.native=\"goToDetail(item.id)\"\r\n        >\r\n          <div class=\"item-image\">\r\n            <img v-if=\"item.image\" :src=\"item.image\" alt=\"商品图片\">\r\n            <default-food-image v-else />\r\n            <div class=\"item-status\" :class=\"getStatusClass(item.status)\">\r\n              {{ getStatusText(item.status) }}\r\n            </div>\r\n          </div>\r\n          <div class=\"item-info\">\r\n            <h3 class=\"item-title\">{{ item.name }}</h3>\r\n            <div class=\"item-price\">\r\n              <span class=\"flash-price\">¥{{ item.flashPrice }}</span>\r\n              <span class=\"original-price\">¥{{ item.originalPrice }}</span>\r\n            </div>\r\n            <div class=\"item-progress\">\r\n              <el-progress \r\n                :percentage=\"getProgressPercentage(item)\" \r\n                :color=\"getProgressColor(item)\"\r\n              ></el-progress>\r\n              <span class=\"progress-text\">已售 {{ item.soldCount || 0 }}/{{ item.stock + (item.soldCount || 0) }}</span>\r\n            </div>\r\n            <div class=\"item-time\">\r\n              <i class=\"el-icon-time\"></i>\r\n              <countdown v-if=\"item.status === 1\" :time=\"item.remainSeconds * 1000\" format=\"结束: mm分ss秒\"></countdown>\r\n              <countdown v-else-if=\"item.status === 0\" :time=\"item.remainSeconds * 1000\" format=\"开始: mm分ss秒\"></countdown>\r\n              <span v-else>已结束</span>\r\n            </div>\r\n          </div>\r\n        </el-card>\r\n      </div>\r\n      \r\n      <div class=\"pagination\">\r\n        <el-pagination\r\n          @current-change=\"handleCurrentChange\"\r\n          :current-page.sync=\"currentPage\"\r\n          :page-size=\"pageSize\"\r\n          layout=\"total, prev, pager, next\"\r\n          :total=\"total\"\r\n        ></el-pagination>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { listFlashSaleItems } from '@/api/flashSale';\r\nimport DefaultFoodImage from '@/components/DefaultFoodImage';\r\n\r\nexport default {\r\n  name: 'FlashSale',\r\n  \r\n  components: {\r\n    DefaultFoodImage,\r\n    countdown: {\r\n      props: {\r\n        time: {\r\n          type: Number,\r\n          default: 0\r\n        },\r\n        format: {\r\n          type: String,\r\n          default: 'mm:ss'\r\n        }\r\n      },\r\n      data() {\r\n        return {\r\n          displayTime: '00:00',\r\n          remainingTime: this.time\r\n        };\r\n      },\r\n      mounted() {\r\n        this.startCountdown();\r\n      },\r\n      beforeDestroy() {\r\n        if (this.timer) {\r\n          clearInterval(this.timer);\r\n        }\r\n      },\r\n      methods: {\r\n        startCountdown() {\r\n          this.remainingTime = this.time;\r\n          \r\n          const updateDisplay = () => {\r\n            if (this.remainingTime <= 0) {\r\n              clearInterval(this.timer);\r\n              this.$emit('finish');\r\n              \r\n              // 倒计时结束后刷新数据\r\n              setTimeout(() => {\r\n                this.$parent.loadData();\r\n              }, 1000);\r\n              \r\n              return;\r\n            }\r\n            \r\n            const seconds = Math.floor((this.remainingTime / 1000) % 60);\r\n            const minutes = Math.floor((this.remainingTime / 1000 / 60) % 60);\r\n            const hours = Math.floor((this.remainingTime / 1000 / 60 / 60) % 24);\r\n            const days = Math.floor(this.remainingTime / 1000 / 60 / 60 / 24);\r\n            \r\n            let formattedTime = this.format;\r\n            formattedTime = formattedTime.replace('dd', days.toString().padStart(2, '0'));\r\n            formattedTime = formattedTime.replace('hh', hours.toString().padStart(2, '0'));\r\n            formattedTime = formattedTime.replace('mm', minutes.toString().padStart(2, '0'));\r\n            formattedTime = formattedTime.replace('ss', seconds.toString().padStart(2, '0'));\r\n            \r\n            this.displayTime = formattedTime;\r\n            this.remainingTime -= 1000;\r\n          };\r\n          \r\n          updateDisplay();\r\n          this.timer = setInterval(updateDisplay, 1000);\r\n        }\r\n      },\r\n      render(h) {\r\n        return h('span', { class: 'countdown' }, this.displayTime);\r\n      }\r\n    }\r\n  },\r\n  \r\n  data() {\r\n    return {\r\n      activeTab: 'ongoing',\r\n      searchName: '',\r\n      loading: false,\r\n      flashSaleItems: [],\r\n      currentPage: 1,\r\n      pageSize: 10,\r\n      total: 0,\r\n      timer: null\r\n    };\r\n  },\r\n  \r\n  created() {\r\n    this.loadData();\r\n    // 每30秒刷新一次数据，保持倒计时更新\r\n    this.timer = setInterval(this.loadData, 30000);\r\n  },\r\n  \r\n  beforeDestroy() {\r\n    if (this.timer) {\r\n      clearInterval(this.timer);\r\n    }\r\n  },\r\n  \r\n  methods: {\r\n    loadData() {\r\n      this.loading = true;\r\n      \r\n      let status = null;\r\n      if (this.activeTab === 'ongoing') {\r\n        status = 1; // 进行中\r\n      } else if (this.activeTab === 'upcoming') {\r\n        status = 0; // 未开始\r\n      } else if (this.activeTab === 'ended') {\r\n        status = 2; // 已结束\r\n      }\r\n      \r\n      const queryParams = {\r\n        name: this.searchName,\r\n        status: status,\r\n        current: this.currentPage,\r\n        size: this.pageSize\r\n      };\r\n      \r\n      listFlashSaleItems(queryParams)\r\n        .then(res => {\r\n          if (res.data && res.data.code === 200) {\r\n            this.flashSaleItems = res.data.data || [];\r\n            this.total = res.data.total || this.flashSaleItems.length;\r\n          } else {\r\n            this.$message.error(res.data.msg || '获取秒杀商品失败');\r\n            this.flashSaleItems = [];\r\n            this.total = 0;\r\n          }\r\n        })\r\n        .catch(err => {\r\n          console.error(err);\r\n          this.$message.error('获取秒杀商品失败');\r\n          this.flashSaleItems = [];\r\n          this.total = 0;\r\n        })\r\n        .finally(() => {\r\n          this.loading = false;\r\n        });\r\n    },\r\n    \r\n    handleTabClick() {\r\n      this.currentPage = 1;\r\n      this.loadData();\r\n    },\r\n    \r\n    handleCurrentChange() {\r\n      this.loadData();\r\n    },\r\n    \r\n    resetSearch() {\r\n      this.searchName = '';\r\n      this.currentPage = 1;\r\n      this.loadData();\r\n    },\r\n    \r\n    goToDetail(itemId) {\r\n      this.$router.push({\r\n        path: '/flashSaleDetail',\r\n        query: { id: itemId }\r\n      });\r\n    },\r\n    \r\n    getStatusText(status) {\r\n      if (status === 0) return '未开始';\r\n      if (status === 1) return '进行中';\r\n      if (status === 2) return '已结束';\r\n      return '未知状态';\r\n    },\r\n    \r\n    getStatusClass(status) {\r\n      if (status === 0) return 'upcoming';\r\n      if (status === 1) return 'ongoing';\r\n      if (status === 2) return 'ended';\r\n      return '';\r\n    },\r\n    \r\n    getProgressPercentage(item) {\r\n      if (!item.stock || !item.soldCount) return 0;\r\n      const total = item.stock + item.soldCount;\r\n      return Math.floor((item.soldCount / total) * 100);\r\n    },\r\n    \r\n    getProgressColor(item) {\r\n      const percentage = this.getProgressPercentage(item);\r\n      if (percentage < 50) return '#67c23a';\r\n      if (percentage < 80) return '#e6a23c';\r\n      return '#f56c6c';\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.flash-sale-container {\r\n  padding: 20px;\r\n}\r\n\r\n.flash-sale-header {\r\n  margin-bottom: 20px;\r\n}\r\n\r\n.flash-sale-filter {\r\n  margin-bottom: 20px;\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 10px;\r\n}\r\n\r\n.flash-sale-content {\r\n  min-height: 300px;\r\n}\r\n\r\n.empty-data {\r\n  text-align: center;\r\n  padding: 50px 0;\r\n  color: #909399;\r\n}\r\n\r\n.empty-data i {\r\n  font-size: 60px;\r\n  margin-bottom: 20px;\r\n}\r\n\r\n.flash-sale-items {\r\n  display: grid;\r\n  grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));\r\n  gap: 20px;\r\n  margin-bottom: 20px;\r\n}\r\n\r\n.flash-sale-item {\r\n  cursor: pointer;\r\n  transition: transform 0.3s;\r\n}\r\n\r\n.flash-sale-item:hover {\r\n  transform: translateY(-5px);\r\n}\r\n\r\n.item-image {\r\n  position: relative;\r\n  height: 200px;\r\n  overflow: hidden;\r\n}\r\n\r\n.item-image img {\r\n  width: 100%;\r\n  height: 100%;\r\n  object-fit: cover;\r\n}\r\n\r\n.item-status {\r\n  position: absolute;\r\n  top: 10px;\r\n  right: 10px;\r\n  padding: 5px 10px;\r\n  border-radius: 4px;\r\n  color: white;\r\n  font-weight: bold;\r\n  font-size: 12px;\r\n}\r\n\r\n.item-status.ongoing {\r\n  background-color: #67c23a;\r\n}\r\n\r\n.item-status.upcoming {\r\n  background-color: #409eff;\r\n}\r\n\r\n.item-status.ended {\r\n  background-color: #909399;\r\n}\r\n\r\n.item-info {\r\n  padding: 15px;\r\n}\r\n\r\n.item-title {\r\n  margin: 0 0 10px;\r\n  font-size: 16px;\r\n  font-weight: bold;\r\n  overflow: hidden;\r\n  text-overflow: ellipsis;\r\n  white-space: nowrap;\r\n}\r\n\r\n.item-price {\r\n  margin-bottom: 10px;\r\n}\r\n\r\n.flash-price {\r\n  font-size: 18px;\r\n  font-weight: bold;\r\n  color: #f56c6c;\r\n  margin-right: 10px;\r\n}\r\n\r\n.original-price {\r\n  font-size: 14px;\r\n  color: #909399;\r\n  text-decoration: line-through;\r\n}\r\n\r\n.item-progress {\r\n  margin-bottom: 10px;\r\n}\r\n\r\n.progress-text {\r\n  font-size: 12px;\r\n  color: #606266;\r\n}\r\n\r\n.item-time {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 5px;\r\n  font-size: 14px;\r\n  color: #606266;\r\n}\r\n\r\n.countdown {\r\n  font-weight: bold;\r\n  color: #f56c6c;\r\n}\r\n\r\n.pagination {\r\n  margin-top: 20px;\r\n  text-align: center;\r\n}\r\n</style> ","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./FlashSale.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./FlashSale.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./FlashSale.vue?vue&type=template&id=1c87a5ce&scoped=true\"\nimport script from \"./FlashSale.vue?vue&type=script&lang=js\"\nexport * from \"./FlashSale.vue?vue&type=script&lang=js\"\nimport style0 from \"./FlashSale.vue?vue&type=style&index=0&id=1c87a5ce&prod&scoped=true&lang=css\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"1c87a5ce\",\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./FlashSale.vue?vue&type=style&index=0&id=1c87a5ce&prod&scoped=true&lang=css\""],"sourceRoot":""}